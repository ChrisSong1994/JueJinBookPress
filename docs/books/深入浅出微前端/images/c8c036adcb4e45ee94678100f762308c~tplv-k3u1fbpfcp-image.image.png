<svg xmlns="http://www.w3.org/2000/svg" width="3323px" height="4853px" version="1.1"><defs/><g transform="translate(0.5,0.5)"><rect x="721" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 821 91 L 821 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />sanitizeArguments 函数</div></div></div></foreignObject><text x="821" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="816" y="201" width="10" height="420" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1951" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2051 91 L 2051 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 1952px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />loadApps 函数</div></div></div></foreignObject><text x="2051" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2046" y="1281" width="10" height="90" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2046" y="2981" width="10" height="200" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1441" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1541 91 L 1541 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 1442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />getAppChanges 函数</div></div></div></foreignObject><text x="1541" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1536" y="771" width="10" height="470" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1536" y="2661" width="10" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1081" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1181 91 L 1181 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 1082px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />reroute 函数</div></div></div></foreignObject><text x="1181" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1176" y="761" width="10" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1176" y="1201" width="10" height="160" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 101 91 L 101 4821" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">主应用<br style="font-size: 14px;" />主运行时</div></div></div></foreignObject><text x="101" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="96" y="111" width="10" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="96" y="1381" width="10" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="456" y="1441" width="10" height="70" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="456" y="1851" width="10" height="210" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 121 1401 L 146 1401 L 146 1421 L 129.12 1421" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 122.12 1421 L 129.12 1417.5 L 129.12 1424.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1411px; margin-left: 150px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">注册 Vue 微应用</div></div></div></foreignObject><text x="150" y="1415" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="1176" y="2031" width="10" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="1176" y="2471" width="10" height="390" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 121 1461 L 276 1461 Q 286 1461 296 1461 L 442.88 1461" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 449.88 1461 L 442.88 1464.5 L 442.88 1457.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1458px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用注册 API，传递注册 API 需要的四个参数</div></div></div></foreignObject><text x="286" y="1458" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 481 1891 L 506 1891 L 506 1911 L 489.12 1911" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 482.12 1911 L 489.12 1907.5 L 489.12 1914.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1901px; margin-left: 510px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否已经注册过微应用<br />如果注册过则抛出异常</div></div></div></foreignObject><text x="510" y="1905" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 481 1991.03 L 506 1991 L 506 2011 L 489.12 2011.02" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 482.12 2011.03 L 489.11 2007.52 L 489.12 2014.52 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2001px; margin-left: 510px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">缓存注册的微应用（包括格式化的参数、应用初始状态 NOT_LOADED ）<br />后续可用于获取微应用信息和判断是否已经注册</div></div></div></foreignObject><text x="510" y="2005" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 481 2040.41 L 481 2040.2 Q 481 2040 491 2040 L 1151 2040 Q 1161 2040 1156.94 2040.2 L 1152.88 2040.41" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1159.88 2040.41 L 1152.88 2043.91 L 1152.88 2036.91 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2037px; margin-left: 821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">如果是浏览器环境，执行 reroute 函数</div></div></div></foreignObject><text x="821" y="2037" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1536" y="2041" width="10" height="470" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="816" y="1471" width="10" height="420" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 481 1491 L 636 1491 Q 646 1491 656 1491 L 802.88 1491" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 809.88 1491 L 802.88 1494.5 L 802.88 1487.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1488px; margin-left: 646px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 sanitizeArguments 函数，对注册的参数进行格式化</div></div></div></foreignObject><text x="646" y="1488" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 841 1511 L 866 1511 L 866 1531 L 849.12 1531" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 1531 L 849.12 1527.5 L 849.12 1534.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1521px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否使用对象 API 形式</div></div></div></foreignObject><text x="870" y="1525" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 1551 L 866 1551 L 866 1571 L 849.12 1571" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 1571 L 849.12 1567.5 L 849.12 1574.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1561px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果是对象 API<br />则对传入的首个参数进行格式校验</div></div></div></foreignObject><text x="870" y="1565" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 1591 L 866 1591 L 866 1611 L 849.12 1611" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 1611 L 849.12 1607.5 L 849.12 1614.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1601px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果是函数 API<br />则对传入的四个参数进行格式校验</div></div></div></foreignObject><text x="870" y="1605" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 1681 L 866 1681 L 866 1701 L 849.12 1701" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 1701 L 849.12 1697.5 L 849.12 1704.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1691px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对参数 2 loadApp 进行格式化<br />如果是对象，则包装成返回 Promise 的函数</div></div></div></foreignObject><text x="870" y="1695" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="841" y="1631" width="299" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 297px; height: 1px; padding-top: 1651px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">例如将 { bootstrap, mount, unmount } 包装成<br /> () =&gt; Promise.resolve({ bootstrap, mount, unmount })</div></div></div></foreignObject><text x="991" y="1655" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 841 1721 L 866 1721 L 866 1741 L 849.12 1741" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 1741 L 849.12 1737.5 L 849.12 1744.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1731px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对参数 4 customProps 进行格式化<br />如果没有传递该参数，则默认为空对象</div></div></div></foreignObject><text x="870" y="1735" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 1821 L 866 1821 L 866 1841 L 849.12 1841" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 1841 L 849.12 1837.5 L 849.12 1844.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1831px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对参数 3 activeWhen 进行格式化<br />统一包装成返回 boolean 值的路由匹配函数</div></div></div></foreignObject><text x="870" y="1835" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="841" y="1761" width="300" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1786px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">1、字符串、函数、字符串和函数的数组都统一成数组<br />2、如果是字符串，包装成正则进行匹配<br />3、对当前 URL 的路由进行匹配</div></div></div></foreignObject><text x="991" y="1790" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 801 1871 L 483.24 1871" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 491.12 1866.5 L 482.12 1871 L 491.12 1875.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1868px; margin-left: 641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回格式化后的参数</div></div></div></foreignObject><text x="641" y="1868" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1196 2061 L 1351 2061 Q 1361 2061 1371 2061 L 1517.88 2061" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1524.88 2061 L 1517.88 2064.5 L 1517.88 2057.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2058px; margin-left: 1361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 getAppChanges 函数，判断所有微应用的变化情况 </div></div></div></foreignObject><text x="1361" y="2058" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1561 2071 L 1586 2071 L 1586 2091 L 1569.12 2091" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2091 L 1569.12 2087.5 L 1569.12 2094.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2081px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">计算当前执行的时间戳</div></div></div></foreignObject><text x="1590" y="2085" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 2171 L 1586 2171 L 1586 2191 L 1569.12 2191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2191 L 1569.12 2187.5 L 1569.12 2194.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2181px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">从缓存中获取微应用列表<br />遍历微应用调用参数 3 初始化后的 activeWhen 函数判断是否匹配路由激活微应用<br />注意：当前状态是 SKIP_BECAUSE_BROKEN 则不需要激活 </div></div></div></foreignObject><text x="1590" y="2185" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="1561" y="2111" width="280" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 2131px; margin-left: 1562px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">在 registerApplication 注册函数中<br />已经缓存了注册微应用的信息以及相应的参数信息</div></div></div></foreignObject><text x="1701" y="2135" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1561" y="2211" width="200" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 2231px; margin-left: 1562px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">接下来是状态机中的状态转换计算<br />任一时刻微应用只能处于一个状态</div></div></div></foreignObject><text x="1661" y="2235" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1561 2271 L 1586 2271 L 1586 2291 L 1569.12 2291" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2291 L 1569.12 2287.5 L 1569.12 2294.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2281px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 LOAD_ERROR<br />如果微应用被激活且加载失败的时间超过 200ms，将其添加到 appsToLoad 数组中</div></div></div></foreignObject><text x="1590" y="2285" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 2331 L 1586 2331 L 1586 2351 L 1569.12 2351" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2351 L 1569.12 2347.5 L 1569.12 2354.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2341px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 NOT_LOADED 或 LOADING_SOURCE_CODE<br />如果微应用被激活，将其添加到 appsToLoad 数组中</div></div></div></foreignObject><text x="1590" y="2345" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 2391 L 1586 2391 L 1586 2411 L 1569.12 2411" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2411 L 1569.12 2407.5 L 1569.12 2414.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2401px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 NOT_BOOTSTRAPPED 或者 NOT_MOUNTED<br />如果微应用失活，则将其添加到 appsToUnload 数组中<br />如果微应用激活，则将其添加到 appsToMount 数组中</div></div></div></foreignObject><text x="1590" y="2405" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 2450 L 1586 2450 L 1586 2470 L 1569.12 2470" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2470 L 1569.12 2466.5 L 1569.12 2473.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2460px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 MOUNTED<br />如果微应用失活，则将其添加到 appsToUnmount 数组</div></div></div></foreignObject><text x="1590" y="2464" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1521 2491 L 1203.24 2491" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1211.12 2486.5 L 1202.12 2491 L 1211.12 2495.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2488px; margin-left: 1361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回所有需要变化的微应用信息</div></div></div></foreignObject><text x="1361" y="2488" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1201 2511 L 1226 2511 L 1226 2531 L 1209.12 2531" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1202.12 2531 L 1209.12 2527.5 L 1209.12 2534.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2521px; margin-left: 1230px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否已经调用 start 函数启动微应用</div></div></div></foreignObject><text x="1230" y="2525" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1201 2571 L 1606 2571 Q 1616 2571 1626 2571 L 2022.88 2571" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2029.88 2571 L 2022.88 2574.5 L 2022.88 2567.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2568px; margin-left: 1616px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">没有执行过 start 函数时调用 loadApps 函数，根据需要变化的 appsToLoad 微应用信息，执行微应用的加载</div></div></div></foreignObject><text x="1616" y="2568" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2046" y="2551" width="10" height="90" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="96" y="2546" width="10" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="361" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 461 91 L 461 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa<br />registerApplication 注册函数</div></div></div></foreignObject><text x="461" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="456" y="171" width="10" height="70" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="456" y="581" width="10" height="210" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 121 131 L 146 131 L 146 151 L 129.12 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 122.12 151 L 129.12 147.5 L 129.12 154.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 141px; margin-left: 150px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">注册 React 微应用</div></div></div></foreignObject><text x="150" y="145" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 121 191 L 276 191 Q 286 191 296 191 L 442.88 191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 449.88 191 L 442.88 194.5 L 442.88 187.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 188px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用注册 API，传递注册 API 需要的四个参数</div></div></div></foreignObject><text x="286" y="188" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 481 621 L 506 621 L 506 641 L 489.12 641" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 482.12 641 L 489.12 637.5 L 489.12 644.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 631px; margin-left: 510px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否已经注册过微应用<br />如果注册过则抛出异常</div></div></div></foreignObject><text x="510" y="635" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 481 721.03 L 506 721 L 506 741 L 489.12 741.02" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 482.12 741.03 L 489.11 737.52 L 489.12 744.52 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 731px; margin-left: 510px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">缓存注册的微应用（包括格式化的参数、应用初始状态 NOT_LOADED ）<br />后续可用于获取微应用信息和判断是否已经注册</div></div></div></foreignObject><text x="510" y="735" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 481 770.41 L 481 770.21 Q 481 770 491 770 L 1151 770 Q 1161 770 1156.94 770.2 L 1152.88 770.41" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1159.88 770.41 L 1152.88 773.91 L 1152.88 766.91 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 767px; margin-left: 821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">如果是浏览器环境，执行 reroute 函数</div></div></div></foreignObject><text x="821" y="767" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="388.5" y="1" width="145" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 21px; margin-left: 390px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用注册</div></div></div></foreignObject><text x="461" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="748.5" y="1" width="145" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 21px; margin-left: 750px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用注册参数格式化</div></div></div></foreignObject><text x="821" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 481 221 L 481 221 Q 481 221 491 221 L 801 221 Q 811 221 806.94 221 L 802.88 221" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 809.88 221 L 802.88 224.5 L 802.88 217.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 218px; margin-left: 646px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 sanitizeArguments 函数，对注册的参数进行格式化</div></div></div></foreignObject><text x="646" y="218" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 841 241 L 866 241 L 866 261 L 849.12 261" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 261 L 849.12 257.5 L 849.12 264.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 251px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否使用对象 API 形式</div></div></div></foreignObject><text x="870" y="255" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 281 L 866 281 L 866 301 L 849.12 301" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 301 L 849.12 297.5 L 849.12 304.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 291px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果是对象 API<br />则对传入的首个参数进行格式校验</div></div></div></foreignObject><text x="870" y="295" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 321 L 866 321 L 866 341 L 849.12 341" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 341 L 849.12 337.5 L 849.12 344.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 331px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果是函数 API<br />则对传入的四个参数进行格式校验</div></div></div></foreignObject><text x="870" y="335" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 411 L 866 411 L 866 431 L 849.12 431" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 431 L 849.12 427.5 L 849.12 434.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 421px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对参数 2 loadApp 进行格式化<br />如果是对象，则包装成返回 Promise 的函数</div></div></div></foreignObject><text x="870" y="425" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="841" y="361" width="299" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 297px; height: 1px; padding-top: 381px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">例如将 { bootstrap, mount, unmount } 包装成<br /> () =&gt; Promise.resolve({ bootstrap, mount, unmount })</div></div></div></foreignObject><text x="991" y="385" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 841 451 L 866 451 L 866 471 L 849.12 471" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 471 L 849.12 467.5 L 849.12 474.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 461px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对参数 4 customProps 进行格式化<br />如果没有传递该参数，则默认为空对象</div></div></div></foreignObject><text x="870" y="465" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 841 551 L 866 551 L 866 571 L 849.12 571" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 842.12 571 L 849.12 567.5 L 849.12 574.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 561px; margin-left: 870px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对参数 3 activeWhen 进行格式化<br />统一包装成返回 boolean 值的路由匹配函数</div></div></div></foreignObject><text x="870" y="565" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="841" y="491" width="300" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 516px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">1、字符串、函数、字符串和函数的数组都统一成数组<br />2、如果是字符串，包装成正则进行匹配<br />3、对当前 URL 的路由进行匹配</div></div></div></foreignObject><text x="991" y="520" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 801 601 L 483.24 601" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 491.12 596.5 L 482.12 601 L 491.12 605.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 598px; margin-left: 641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回格式化后的参数</div></div></div></foreignObject><text x="641" y="598" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1108.5" y="1" width="145" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 21px; margin-left: 1110px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">路由变化执行函数</div></div></div></foreignObject><text x="1181" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1454.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 1456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用状态转换计算函数</div></div></div></foreignObject><text x="1541" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1196 791 L 1351 791 Q 1361 791 1371 791 L 1517.88 791" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1524.88 791 L 1517.88 794.5 L 1517.88 787.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 788px; margin-left: 1361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 getAppChanges 函数，判断所有微应用的变化情况 </div></div></div></foreignObject><text x="1361" y="788" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1561 801 L 1586 801 L 1586 821 L 1569.12 821" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 821 L 1569.12 817.5 L 1569.12 824.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 811px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">计算当前执行的时间戳</div></div></div></foreignObject><text x="1590" y="815" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 901 L 1586 901 L 1586 921 L 1569.12 921" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 921 L 1569.12 917.5 L 1569.12 924.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 911px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">从缓存中获取微应用列表<br />遍历微应用调用参数 3 初始化后的 activeWhen 函数判断是否匹配路由激活微应用<br />注意：当前状态是 SKIP_BECAUSE_BROKEN 则不需要激活 </div></div></div></foreignObject><text x="1590" y="915" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="1561" y="841" width="280" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 861px; margin-left: 1562px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">在 registerApplication 注册函数中<br />已经缓存了注册微应用的信息以及相应的参数信息</div></div></div></foreignObject><text x="1701" y="865" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1561" y="941" width="210" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 961px; margin-left: 1562px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">接下来是状态机中的状态转换计算<br />任一时刻微应用只能处于一个状态</div></div></div></foreignObject><text x="1666" y="965" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1561 1001 L 1586 1001 L 1586 1021 L 1569.12 1021" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 1021 L 1569.12 1017.5 L 1569.12 1024.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1011px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 LOAD_ERROR<br />如果微应用被激活且加载失败的时间超过 200ms，将其添加到 appsToLoad 数组中</div></div></div></foreignObject><text x="1590" y="1015" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 1061 L 1586 1061 L 1586 1081 L 1569.12 1081" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 1081 L 1569.12 1077.5 L 1569.12 1084.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1071px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 NOT_LOADED 或 LOADING_SOURCE_CODE<br />如果微应用被激活，将其添加到 appsToLoad 数组中</div></div></div></foreignObject><text x="1590" y="1075" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 1121 L 1586 1121 L 1586 1141 L 1569.12 1141" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 1141 L 1569.12 1137.5 L 1569.12 1144.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1131px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 NOT_BOOTSTRAPPED 或者 NOT_MOUNTED<br />如果微应用失活，则将其添加到 appsToUnload 数组中<br />如果微应用激活，则将其添加到 appsToMount 数组中</div></div></div></foreignObject><text x="1590" y="1135" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1561 1180 L 1586 1180 L 1586 1200 L 1569.12 1200" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 1200 L 1569.12 1196.5 L 1569.12 1203.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1190px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">当前微应用状态是 MOUNTED<br />如果微应用失活，则将其添加到 appsToUnmount 数组</div></div></div></foreignObject><text x="1590" y="1194" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1521 1221 L 1203.24 1221" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1211.12 1216.5 L 1202.12 1221 L 1211.12 1225.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1218px; margin-left: 1361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回所有需要变化的微应用信息</div></div></div></foreignObject><text x="1361" y="1218" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1241" y="1101" width="235" height="90" rx="36" ry="36" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 233px; height: 1px; padding-top: 1146px; margin-left: 1242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">appsToUnload: 需要去加载的应用<br />appsToUnmount: 需要卸载的应用<br /> appsToLoad: 需要加载的应用<br /> appsToMount: 需要挂载的应用<br />首次没有激活任何应用时上述都为空数组</div></div></div></foreignObject><text x="1359" y="1150" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1861" y="841" width="150" height="40" rx="16" ry="16" fill="#99ccff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 861px; margin-left: 1862px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">使用参数 3 activeWhen</div></div></div></foreignObject><text x="1936" y="865" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="481" y="661" width="220" height="40" rx="16" ry="16" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 681px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">初始化应用的状态为 NOT_LOADED</div></div></div></foreignObject><text x="591" y="685" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1201 1241 L 1226 1241 L 1226 1261 L 1209.12 1261" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1202.12 1261 L 1209.12 1257.5 L 1209.12 1264.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1251px; margin-left: 1230px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否已经调用 start 函数启动微应用</div></div></div></foreignObject><text x="1230" y="1255" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1201 1301 L 1606 1301 Q 1616 1301 1626 1301 L 2022.88 1301" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2029.88 1301 L 2022.88 1304.5 L 2022.88 1297.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1298px; margin-left: 1616px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">没有执行过 start 函数时调用 loadApps 函数，根据需要变化的 appsToLoad 微应用信息，执行微应用的加载</div></div></div></foreignObject><text x="1616" y="1298" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1964.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 1966px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用批量异步加载函数</div></div></div></foreignObject><text x="2051" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2071 1321 L 2096 1321 L 2096 1341 L 2079.12 1341" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2072.12 1341 L 2079.12 1337.5 L 2079.12 1344.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1331px; margin-left: 2100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，准备异步加载微应用<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="2100" y="1335" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2071 2591 L 2096 2591 L 2096 2611 L 2079.12 2611" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2072.12 2611 L 2079.12 2607.5 L 2079.12 2614.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2601px; margin-left: 2100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步加载微应用<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="2100" y="2605" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2071" y="1251" width="250" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1276px; margin-left: 2072px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">这里会等待同步代码执行完毕<br />例如所有的 registerApplication 和 start </div></div></div></foreignObject><text x="2196" y="1280" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2071" y="2521" width="250" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 2546px; margin-left: 2072px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">这里会等待同步代码执行完毕<br />例如所有的 registerApplication 和 start </div></div></div></foreignObject><text x="2196" y="2550" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 121 2591 L 146 2591 L 146 2611 L 129.12 2611" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 122.12 2611 L 129.12 2607.5 L 129.12 2614.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2601px; margin-left: 150px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">执行 start 函数</div></div></div></foreignObject><text x="150" y="2605" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 121 2651.33 L 121 2651.16 Q 121 2651 131 2651 L 1152.88 2651" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1159.88 2651 L 1152.88 2654.5 L 1152.88 2647.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2648px; margin-left: 641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">如果是浏览器环境，执行 reroute 函数</div></div></div></foreignObject><text x="641" y="2648" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1241" y="2371" width="235" height="90" rx="36" ry="36" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 233px; height: 1px; padding-top: 2416px; margin-left: 1242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">appsToUnload: 需要去加载的应用<br />appsToUnmount: 需要卸载的应用<br /> appsToLoad: 需要加载的应用<br /> appsToMount: 需要挂载的应用<br />首次没有激活任何应用时上述都为空数组</div></div></div></foreignObject><text x="1359" y="2420" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1201 2771 L 1226 2771 L 1226 2791 L 1209.12 2791" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1202.12 2791 L 1209.12 2787.5 L 1209.12 2794.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2781px; margin-left: 1230px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否已经调用 start 函数启动微应用</div></div></div></foreignObject><text x="1230" y="2785" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2321" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2421 91 L 2421 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 2322px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />performAppChanges 函数</div></div></div></foreignObject><text x="2421" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2416" y="2814" width="10" height="87" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2416" y="3191" width="10" height="750" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2416" y="4351" width="10" height="110" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2416" y="4201" width="10" height="80" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2442.25 4226 L 2467.3 4226 L 2467.3 4246 L 2450.37 4246" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2443.37 4246 L 2450.37 4242.5 L 2450.37 4249.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4236px; margin-left: 2471px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有 unmount 和 unload 执行完毕后<br />发送 single-spa:before-mount-routing-event 事件</div></div></div></foreignObject><text x="2471" y="4240" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2181" y="4216" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 4236px; margin-left: 2182px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:before-mount-routing-event </div></div></div></foreignObject><text x="2291" y="4240" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2442.25" y="4161" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4186px; margin-left: 2443px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 3 执行<br />所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2562" y="4190" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2334.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 2336px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用批量变更函数</div></div></div></foreignObject><text x="2421" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1201 2831.03 L 1201 2831.02 Q 1201 2831 1211 2831 L 2392.88 2831" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2399.88 2831 L 2392.88 2834.5 L 2392.88 2827.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2828px; margin-left: 1801px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">已经执行过 start 函数时调用 performAppChanges 函数，根据需要变化微应用信息，执行微应用的变更流程</div></div></div></foreignObject><text x="1801" y="2828" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 2851 L 2466 2851 L 2466 2871 L 2449.12 2871" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 2871 L 2449.12 2867.5 L 2449.12 2874.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2861px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步加载微应用<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="2470" y="2865" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2067.25" y="2881" width="273.75" height="60" rx="24" ry="24" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 272px; height: 1px; padding-top: 2911px; margin-left: 2068px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">同步代码执行完毕，微任务开始执行<br />由于注册了两个应用，这里会执行两次<br />首次没有激活任何微应用，没有应用需要加载</div></div></div></foreignObject><text x="2204" y="2915" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2334.75" y="1251" width="216.25" height="50" rx="20" ry="20" fill="#9999ff" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 1276px; margin-left: 2336px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 React 微应用】加入微任务 1<br />等待异步执行 loadApps</div></div></div></foreignObject><text x="2443" y="1280" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1861" y="2111" width="150" height="40" rx="16" ry="16" fill="#99ccff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 2131px; margin-left: 1862px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">使用参数 3 activeWhen</div></div></div></foreignObject><text x="1936" y="2135" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2341" y="2521" width="216.25" height="50" rx="20" ry="20" fill="#9999ff" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 2546px; margin-left: 2342px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 Vue 微应用】加入微任务 2<br />等待异步执行 loadApps</div></div></div></foreignObject><text x="2449" y="2550" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1201 2681 L 1351 2681 Q 1361 2681 1371 2681 L 1512.88 2681" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1519.88 2681 L 1512.88 2684.5 L 1512.88 2677.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2678px; margin-left: 1361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">再次调用 getAppChanges 函数，判断所有微应用的变化情况</div></div></div></foreignObject><text x="1361" y="2678" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1561 2701 L 1586 2701 L 1586 2721 L 1569.12 2721" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1562.12 2721 L 1569.12 2717.5 L 1569.12 2724.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2711px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">执行同样的状态转换计算</div></div></div></foreignObject><text x="1590" y="2715" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1518.5 2741 L 1200.74 2741" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1208.62 2736.5 L 1199.62 2741 L 1208.62 2745.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2738px; margin-left: 1359px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回所有需要变化的微应用信息</div></div></div></foreignObject><text x="1359" y="2738" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="2781" width="220" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 2806px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入微任务 3<br />等待异步执行 performAppChanges </div></div></div></foreignObject><text x="2551" y="2810" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2307.25" y="2951" width="250" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 2971px; margin-left: 2308px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 React 微应用】 加入 Promise 回调 1<br />等待所有的 toLoadPromise 执行完毕</div></div></div></foreignObject><text x="2432" y="2975" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2067.25" y="2951" width="220" height="40" rx="16" ry="16" fill="#9999ff" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 2971px; margin-left: 2068px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 React 微应用】 微任务 1 执行<br />异步执行 loadApps</div></div></div></foreignObject><text x="2177" y="2975" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2071 3011 L 2096 3011 L 2096 3031 L 2079.12 3031" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2072.12 3031 L 2079.12 3027.5 L 2079.12 3034.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3021px; margin-left: 2100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 toLoadPromise 执行完毕<br />没有激活任何微应用，此时没有任何微应用需要 toLoadPromise </div></div></div></foreignObject><text x="2100" y="3025" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2067.25" y="3051" width="220" height="40" rx="16" ry="16" fill="#9999ff" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 3071px; margin-left: 2068px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 Vue 微应用】 微任务 2 执行<br />异步执行 loadApps</div></div></div></foreignObject><text x="2177" y="3075" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2071 3111 L 2096 3111 L 2096 3131 L 2079.12 3131" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2072.12 3131 L 2079.12 3127.5 L 2079.12 3134.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3121px; margin-left: 2100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 toLoadPromise 执行完毕<br />没有激活任何微应用，此时没有任何微应用需要 toLoadPromise </div></div></div></foreignObject><text x="2100" y="3125" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2307.25" y="3051" width="250" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 3071px; margin-left: 2308px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 Vue 微应用】 加入 Promise 回调 2<br />等待所有的 toLoadPromise 执行完毕</div></div></div></foreignObject><text x="2432" y="3075" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="3141" width="220" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 3166px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微任务 3 执行 <br />异步执行 performAppChanges </div></div></div></foreignObject><text x="2551" y="3170" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 3211 L 2466 3211 L 2466 3231 L 2449.12 3231" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3231 L 2449.12 3227.5 L 2449.12 3234.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3221px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">计算需要变更的微应用信息<br />提供发送事件需要的数据详情（即将变更的应用新状态信息、变更的应用数等）</div></div></div></foreignObject><text x="2470" y="3225" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2441 3251 L 2466 3251 L 2466 3271 L 2449.12 3271" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3271 L 2449.12 3267.5 L 2449.12 3274.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3261px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送 single-spa:before-no-app-change 事件<br />并提供事件对应的应用变化的详情信息</div></div></div></foreignObject><text x="2470" y="3265" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2441 3301 L 2466 3301 L 2466 3321 L 2449.12 3321" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3321 L 2449.12 3317.5 L 2449.12 3324.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3311px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送 single-spa:before-routing-event 事件<br />并提供事件对应的应用变化的详情信息以及可以取消导航变化的钩子函数</div></div></div></foreignObject><text x="2470" y="3315" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2441 3451 L 2466 3451 L 2466 3471 L 2449.12 3471" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3471 L 2449.12 3467.5 L 2449.12 3474.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3461px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果有应用需要 unload，则批量执行 toUnloadPromise</div></div></div></foreignObject><text x="2470" y="3465" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2441" y="3391" width="220" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 3411px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">由于没有激活任何微应用<br />因此这里没有需要 unload 的微应用</div></div></div></foreignObject><text x="2551" y="3415" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 3571 L 2466 3571 L 2466 3591 L 2449.12 3591" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3591 L 2449.12 3587.5 L 2449.12 3594.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3581px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果有应用需要 unmount，则批量执行 toUnmountPromise 和 toUnloadPromise<br />并等待所有的 Promise 执行完毕  </div></div></div></foreignObject><text x="2470" y="3585" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2441 3351 L 2466 3351 L 2466 3371 L 2449.12 3371" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3371 L 2449.12 3367.5 L 2449.12 3374.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3361px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果外部主应用监听了 single-spa:before-routing-event 事件并调用了取消导航的钩子函数<br />single-spa 会触发相应的取消事件和后续的结束事件，并回退到旧的导航，后续逻辑放弃执行</div></div></div></foreignObject><text x="2470" y="3365" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2179.75" y="3241" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 3261px; margin-left: 2181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:before-no-app-change </div></div></div></foreignObject><text x="2290" y="3265" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2179.75" y="3291" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 3311px; margin-left: 2181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:before-routing-event </div></div></div></foreignObject><text x="2290" y="3315" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="3491" width="400" height="60" rx="24" ry="24" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 3521px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">为什么需要在执行完 toUnmountPromise 后执行 toUnloadPromise 呢？<br />这和直接执行 toUnloadPromise 有什么区别呢？  <br />由于没有激活任何微应用，这里没有需要 unmount 的微应用 </div></div></div></foreignObject><text x="2641" y="3525" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2851" y="3491" width="240" height="60" rx="24" ry="24" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 3521px; margin-left: 2852px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 3<br />等待所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2971" y="3525" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="3611" width="350" height="60" rx="24" ry="24" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 3641px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">在 unmont 和 unload 的同时执行<br />load 的执行不会等待 unmount 完毕，mount 的执行会等待<br />由于没有激活任何微应用，这里没有需要 load 的微应用 </div></div></div></foreignObject><text x="2616" y="3645" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 3681 L 2466 3681 L 2466 3701 L 2449.12 3701" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3701 L 2449.12 3697.5 L 2449.12 3704.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3691px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果有应用需要 load，则批量执行 toLoadPromise  </div></div></div></foreignObject><text x="2470" y="3695" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2441" y="3721" width="270" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 3741px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">由于没有激活任何微应用，appsToMount = []<br />没有需要 mount 的应用</div></div></div></foreignObject><text x="2576" y="3745" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 3781 L 2466 3781 L 2466 3801 L 2449.12 3801" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3801 L 2449.12 3797.5 L 2449.12 3804.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3791px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果 app 已经 load 和 bootstrap<br />那么可能需要等待所有 unmount 结束后执行 mount</div></div></div></foreignObject><text x="2470" y="3795" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2441" y="3821" width="270" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 3846px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 4<br />再次等待所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2576" y="3850" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 3891 L 2466 3891 L 2466 3911 L 2449.12 3911" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3911 L 2449.12 3907.5 L 2449.12 3914.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3901px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 unmount 和 unload 执行结束 </div></div></div></foreignObject><text x="2470" y="3905" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2046" y="3951" width="10" height="210" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2071 3981 L 2096 3981 L 2096 4001 L 2079.12 4001" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2072.12 4001 L 2079.12 3997.5 L 2079.12 4004.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3991px; margin-left: 2100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">第一次注册 React 微应用对应的 loadApps 加载完毕<br />由于没有微应用被激活，没有需要进行的 toLoadPromise<br />回调主要执行 callAllEventListeners 处理路由事件，首次加载没有事件需要处理 </div></div></div></foreignObject><text x="2100" y="3995" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2071" y="3911" width="250" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 3931px; margin-left: 2072px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 React 微应用】 Promise 回调 1 执行<br />所有的 load 执行完毕</div></div></div></foreignObject><text x="2196" y="3935" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2071 4111 L 2096 4111 L 2096 4131 L 2079.12 4131" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2072.12 4131 L 2079.12 4127.5 L 2079.12 4134.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4121px; margin-left: 2100px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有的 load 执行完毕（Vue 微应用加载完毕）<br />由于没有微应用被激活，没有需要进行的 toLoadPromise<br />回调主要执行 callAllEventListeners 处理路由事件，首次加载没有事件需要处理</div></div></div></foreignObject><text x="2100" y="4125" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2071" y="4041" width="250" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 4061px; margin-left: 2072px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【注册 Vue 微应用】 Promise 回调 2 执行<br />所有的 load 执行完毕</div></div></div></foreignObject><text x="2196" y="4065" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 4371 L 2466 4371 L 2466 4391 L 2449.12 4391" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 4391 L 2449.12 4387.5 L 2449.12 4394.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4381px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有的 unmount 和 unload 执行完毕<br />回调主要执行 callAllEventListeners 处理路由事件，首次加载没有事件需要处理</div></div></div></foreignObject><text x="2470" y="4385" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2441" y="4301" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4326px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 4 执行<br />所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2561" y="4330" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2701" y="4296" width="350" height="60" rx="24" ry="24" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 4326px; margin-left: 2702px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">注意回调 3 发送的是 before-mount 事件<br />这里是因为没有任何事件需要 mount，所以挨着触发执行了</div></div></div></foreignObject><text x="2876" y="4330" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2681" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2781 91 L 2781 4851" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 2682px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />finishUpAndReturn 函数</div></div></div></foreignObject><text x="2781" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2776" y="4411" width="10" height="120" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2776" y="4631" width="10" height="160" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2694.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 2696px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">执行完成处理</div></div></div></foreignObject><text x="2781" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 4431 L 2591 4431 Q 2601 4431 2611 4431 L 2752.88 4431" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2759.88 4431 L 2752.88 4434.5 L 2752.88 4427.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4428px; margin-left: 2601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">等待所有的 load 和 mount 执行完毕</div></div></div></foreignObject><text x="2601" y="4428" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2801 4481 L 2826 4481 L 2826 4501 L 2809.12 4501" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2802.12 4501 L 2809.12 4497.5 L 2809.12 4504.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4491px; margin-left: 2830px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 load 和 mount 执行完毕<br />准备执行结束逻辑</div></div></div></foreignObject><text x="2830" y="4495" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2801" y="4411" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4436px; margin-left: 2802px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 5<br />等待所有的 load 和 mount 执行完毕 </div></div></div></foreignObject><text x="2921" y="4440" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3051" y="4411" width="270" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 4436px; margin-left: 3052px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">由于没有激活任何微应用，appsToMount = []<br />没有需要 load 和 mount 的应用</div></div></div></foreignObject><text x="3186" y="4440" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2801 4651 L 2826 4651 L 2826 4671 L 2809.12 4671" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2802.12 4671 L 2809.12 4667.5 L 2809.12 4674.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4661px; margin-left: 2830px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有的 load 和 mount 执行完毕<br />发送 single-spa:no-app-change 事件</div></div></div></foreignObject><text x="2830" y="4665" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2541" y="4641" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 4661px; margin-left: 2542px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:no-app-change </div></div></div></foreignObject><text x="2651" y="4665" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2801 4701 L 2826 4701 L 2826 4721 L 2809.12 4721" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2802.12 4721 L 2809.12 4717.5 L 2809.12 4724.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4711px; margin-left: 2830px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送 single-spa:routing-event 事件</div></div></div></foreignObject><text x="2830" y="4715" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2541" y="4691" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 4711px; margin-left: 2542px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:routing-event </div></div></div></foreignObject><text x="2651" y="4715" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2801 4751 L 2826 4751 L 2826 4771 L 2809.12 4771" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2802.12 4771 L 2809.12 4767.5 L 2809.12 4774.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4761px; margin-left: 2830px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重置应用正在变化的标记<br />从而可以继续执行 performAppChanges </div></div></div></foreignObject><text x="2830" y="4765" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2801" y="4571" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4596px; margin-left: 2802px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 5 执行<br />所有的 load 和 mount 执行完毕 </div></div></div></foreignObject><text x="2921" y="4600" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="711" y="661" width="370" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 368px; height: 1px; padding-top: 681px; margin-left: 712px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">缓存的微应用会在 getAppChanges 函数中用于计算微应用的状态 </div></div></div></foreignObject><text x="896" y="685" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="481" y="1931" width="220" height="40" rx="16" ry="16" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1951px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">初始化应用的状态为 NOT_LOADED</div></div></div></foreignObject><text x="591" y="1955" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g></g></svg>