<svg xmlns="http://www.w3.org/2000/svg" width="5086px" height="7173px" version="1.1"><defs/><g transform="translate(0.5,0.5)"><rect x="2719.75" y="51" width="271.25" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2855.38 91 L 2855.38 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 269px; height: 1px; padding-top: 71px; margin-left: 2721px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />toUnmountPromise 函数</div></div></div></foreignObject><text x="2855" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2850.38" y="1571" width="10" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2850.38" y="1981" width="10" height="280" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2850.38" y="2551" width="10" height="150" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2850.38" y="3631" width="10" height="200" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="481" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 581 91 L 581 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用<br />运行时</div></div></div></foreignObject><text x="581" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1241" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1341 91 L 1341 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 1242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa<br />registerApplication 注册函数</div></div></div></foreignObject><text x="1341" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1921" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2021 91 L 2021 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 1922px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />getAppChanges 函数</div></div></div></foreignObject><text x="2021" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1561" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1661 91 L 1661 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 1562px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />reroute 函数</div></div></div></foreignObject><text x="1661" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1656" y="851" width="10" height="250" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="121" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 221 91 L 221 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 122px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">主应用<br style="font-size: 14px;" />主运行时</div></div></div></foreignObject><text x="221" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1268.5" y="1" width="145" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 21px; margin-left: 1270px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用注册</div></div></div></foreignObject><text x="1341" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1588.5" y="1" width="145" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 21px; margin-left: 1590px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">路由变化执行函数</div></div></div></foreignObject><text x="1661" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1934.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 1936px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用状态转换计算函数</div></div></div></foreignObject><text x="2021" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2281" y="51" width="270" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2416 91 L 2416 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 71px; margin-left: 2282px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />performAppChanges 函数</div></div></div></foreignObject><text x="2416" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2412.25" y="1064" width="10" height="87" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2412.25" y="3791" width="10" height="430" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2412.25" y="4751" width="10" height="330" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="2412.25" y="6016" width="10" height="195" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2441 6131 L 2466.5 6131 L 2466.5 6151 L 2449.12 6151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 6151 L 2449.12 6147.5 L 2449.12 6154.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6141px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有应用的 unmount 执行完毕</div></div></div></foreignObject><text x="2470" y="6145" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2328.5" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 2330px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用批量变更函数</div></div></div></foreignObject><text x="2415" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3241" y="51" width="260" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3371 91 L 3371 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 71px; margin-left: 3242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />toLoadPromise 函数</div></div></div></foreignObject><text x="3371" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3366" y="1741" width="10" height="90" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3366" y="2221" width="10" height="340" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3366" y="3011" width="10" height="590" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3366" y="4311" width="10" height="480" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3284.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 3286px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用加载函数</div></div></div></foreignObject><text x="3371" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3634.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 3636px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用启动函数</div></div></div></foreignObject><text x="3721" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4241" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4341 91 L 4341 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 4242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />reasonableTime 函数</div></div></div></foreignObject><text x="4341" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4336" y="2551" width="10" height="480" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="4336" y="3561" width="10" height="110" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4361 5631 L 4386 5631 L 4386 5651 L 4369.12 5651" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 5651 L 4369.12 5647.5 L 4369.12 5654.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5641px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 bootstrap 函数运行的超时时间</div></div></div></foreignObject><text x="4390" y="5645" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4336" y="5211" width="10" height="460" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4361 5390 L 4386 5390 L 4386 5410 L 4369.12 5410" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 5410 L 4369.12 5406.5 L 4369.12 5413.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5400px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">获取注册应用时提供的参数 4 customProps<br />执行微应用的 bootstrap 函数</div></div></div></foreignObject><text x="4390" y="5404" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4361 5591 L 4386 5591 L 4386 5611 L 4369.12 5611" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 5611 L 4369.12 5607.5 L 4369.12 5614.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5601px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待微应用的 bootsrap 的 Promise 回调执行</div></div></div></foreignObject><text x="4390" y="5605" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4361 5251 L 4386 5251 L 4386 5271 L 4369.12 5271" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 5271 L 4369.12 5267.5 L 4369.12 5274.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5261px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置执行结束的标志<br />设置错误标记</div></div></div></foreignObject><text x="4390" y="5265" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4641" y="5311" width="150" height="49" rx="19.6" ry="19.6" fill="#99ccff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 5336px; margin-left: 4642px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">使用参数 4 customProps</div></div></div></foreignObject><text x="4716" y="5339" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4361" y="5311" width="260" height="49" rx="19.6" ry="19.6" fill="#ff99ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 5336px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">真正开始执行 React 微应用的 bootstrap 函数</div></div></div></foreignObject><text x="4491" y="5339" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4361" y="5521" width="200" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 5546px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 12<br />等待微应用的  bootstrap 执行完毕</div></div></div></foreignObject><text x="4461" y="5550" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4361" y="5181" width="330" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 328px; height: 1px; padding-top: 5206px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">所有生命周期函数的执行都会判定执行的超时时间</div></div></div></foreignObject><text x="4526" y="5210" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4336" y="5821" width="10" height="110" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4361 5861 L 4386 5861 L 4386 5881 L 4369.12 5881" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 5881 L 4369.12 5877.5 L 4369.12 5884.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5871px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 bootstrap 执行结束标记<br />防止执行超时逻辑</div></div></div></foreignObject><text x="4390" y="5875" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4361" y="5791" width="200" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 5816px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 12 执行<br />微应用的 bootstrap 执行完毕</div></div></div></foreignObject><text x="4461" y="5820" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4191" y="6891" width="220" height="50" rx="20" ry="20" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 6916px; margin-left: 4192px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">更改 React 微应用状态为 MOUNTED </div></div></div></foreignObject><text x="4301" y="6920" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4254.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 4256px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用周期函数执行</div></div></div></foreignObject><text x="4341" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4599" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4699 91 L 4699 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 4600px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />finishUpAndReturn 函数</div></div></div></foreignObject><text x="4699" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4694" y="4161" width="10" height="94" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="4612.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 4614px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">执行完成处理</div></div></div></foreignObject><text x="4699" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3883" y="51" width="198" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3982 91 L 3982 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 196px; height: 1px; padding-top: 71px; margin-left: 3884px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />toMountPromise 函数</div></div></div></foreignObject><text x="3982" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3977" y="6151" width="10" height="380" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3977" y="6851" width="10" height="200" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4323 6871 L 4003.24 6871" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 4011.12 6868 L 4002.12 6871 L 4011.12 6874" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6868px; margin-left: 4162px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">完成 mount 执行</div></div></div></foreignObject><text x="4162" y="6868" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4001 6961 L 4026 6961 L 4026 6981 L 4009.12 6981" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4002.12 6981 L 4009.12 6977.5 L 4009.12 6984.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6971px; margin-left: 4030px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置应用的状态为 MOUNTED  </div></div></div></foreignObject><text x="4030" y="6975" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4001 7001 L 4026 7001 L 4026 7021 L 4009.12 7021" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4002.12 7021 L 4009.12 7017.5 L 4009.12 7024.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 7011px; margin-left: 4030px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果是第一次完成执行 mount<br />则发送事件 single-spa:first-mount</div></div></div></foreignObject><text x="4030" y="7015" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4001" y="6891" width="179" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 177px; height: 1px; padding-top: 6916px; margin-left: 4002px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 13 执行<br />reasonableTime 执行完毕</div></div></div></foreignObject><text x="4091" y="6920" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3896.75" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 3898px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用挂载函数</div></div></div></foreignObject><text x="3983" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3591" y="51" width="260" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3721 91 L 3721 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 71px; margin-left: 3592px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa <br style="font-size: 14px;" />toBootstrapPromise 函数</div></div></div></foreignObject><text x="3721" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3741 4991 L 3766 4991 L 3766 5011 L 3749.12 5011" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3742.12 5011 L 3749.12 5007.5 L 3749.12 5014.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5001px; margin-left: 3770px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步执行微应用启动逻辑<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="3770" y="5005" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3741 5101 L 3766 5101 L 3766 5121 L 3749.12 5121" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3742.12 5121 L 3749.12 5117.5 L 3749.12 5124.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5111px; margin-left: 3770px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断应用的状态是否为 NOT_BOOTSTRAPPED<br />如果不是则返回 </div></div></div></foreignObject><text x="3770" y="5115" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3741 5191 L 3766 5191 L 3766 5211 L 3749.12 5211" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3742.12 5211 L 3749.12 5207.5 L 3749.12 5214.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5201px; margin-left: 3770px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">将应用的状态设置为 BOOTSTRAPPING </div></div></div></foreignObject><text x="3770" y="5205" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3716" y="4901" width="10" height="470" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3736" y="4921" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4946px; margin-left: 3737px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】加入微任务 4<br />等待异步执行 toBootstrapPromise </div></div></div></foreignObject><text x="3856" y="4950" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3741" y="5031" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 5056px; margin-left: 3742px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】微任务 4 执行<br />异步执行 toBootstrapPromise </div></div></div></foreignObject><text x="3861" y="5060" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3741" y="5141" width="265" height="40" rx="16" ry="16" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 263px; height: 1px; padding-top: 5161px; margin-left: 3742px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">更改 React 微应用状态为 BOOTSTRAPPING </div></div></div></foreignObject><text x="3874" y="5165" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3741" y="5261" width="179" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 177px; height: 1px; padding-top: 5286px; margin-left: 3742px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 11<br />等待 reasonableTime 执行完毕</div></div></div></foreignObject><text x="3831" y="5290" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3741 5331 L 3766 5331 L 3766 5351 L 3749.12 5351" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3742.12 5351 L 3749.12 5347.5 L 3749.12 5354.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5341px; margin-left: 3770px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待异步的 reasonableTime 执行完毕</div></div></div></foreignObject><text x="3770" y="5345" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3741 6001 L 3766 6001 L 3766 6021 L 3749.12 6021" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3742.12 6021 L 3749.12 6017.5 L 3749.12 6024.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6011px; margin-left: 3770px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置应用的状态为 NOT_MOUNTED  </div></div></div></foreignObject><text x="3770" y="6015" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3716" y="5891" width="10" height="180" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="3741" y="5931" width="179" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 177px; height: 1px; padding-top: 5956px; margin-left: 3742px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 11 执行<br />reasonableTime 执行完毕</div></div></div></foreignObject><text x="3831" y="5960" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="841" y="51" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 941 91 L 941 7171" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 71px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa<br />初始化</div></div></div></foreignObject><text x="941" y="75" fill="#000000" font-family="Garamond" font-size="14px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="936" y="131" width="10" height="500" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="936" y="671" width="10" height="230" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 236 151 L 571 151 Q 581 151 591 151 L 917.88 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 924.88 151 L 917.88 154.5 L 917.88 147.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 148px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">进行路由监听初始化</div></div></div></foreignObject><text x="581" y="148" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 961 171 L 986 171 L 986 191 L 969.12 191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 191 L 969.12 187.5 L 969.12 194.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 181px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否是浏览器环境</div></div></div></foreignObject><text x="990" y="185" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 211 L 986 211 L 986 231 L 969.12 231" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 231 L 969.12 227.5 L 969.12 234.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 221px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">监听 hashchange 事件<br />如果触发事件，则执行 urlReroute 函数 </div></div></div></foreignObject><text x="990" y="225" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 251 L 986 251 L 986 271 L 969.12 271" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 271 L 969.12 267.5 L 969.12 274.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 261px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">监听 popstate 事件<br />如果触发事件，则执行 urlReroute 函数 </div></div></div></foreignObject><text x="990" y="265" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 291 L 986 291 L 986 311 L 969.12 311" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 311 L 969.12 307.5 L 969.12 314.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 301px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重写 window.addEventListener，<br />缓存 hashchange 和 popstate 事件 </div></div></div></foreignObject><text x="990" y="305" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 331 L 986 331 L 986 351 L 969.12 351" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 351 L 969.12 347.5 L 969.12 354.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 341px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重写 window.removeEventListener，<br />清除 hashchange 和 popstate 事件的缓存 </div></div></div></foreignObject><text x="990" y="345" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 451 L 986 451 L 986 471 L 969.12 471" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 471 L 969.12 467.5 L 969.12 474.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 461px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重写 window.history.pushState，<br />调用会时执行 patchedUpdateState 函数触发 popstate 事件</div></div></div></foreignObject><text x="990" y="465" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 951 491 L 976 491 L 976 511 L 959.12 511" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 952.12 511 L 959.12 507.5 L 959.12 514.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 501px; margin-left: 980px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重写 window.history.replaceState，<br />调用会时执行 patchedUpdateState 函数触发 popstate 事件</div></div></div></foreignObject><text x="980" y="505" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 591 L 986 591 L 986 611 L 969.12 611" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 611 L 969.12 607.5 L 969.12 614.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 601px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 window.singleSpaNavigate</div></div></div></foreignObject><text x="990" y="605" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="961" y="531" width="305" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 303px; height: 1px; padding-top: 551px; margin-left: 962px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">如果想要判断微应用是否处于 single-spa 的运行环境中<br />可以判断 window.singleSpaNavigate 是否存在</div></div></div></foreignObject><text x="1114" y="555" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="371" y="221" width="555" height="70" rx="28" ry="28" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 553px; height: 1px; padding-top: 256px; margin-left: 372px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">popstate 事件用于监听历史记录的变化<br />例如：浏览器历史导航（前进、后退）、调用 history.go、history.back 以及 history.forward <br />注意：直接调用 history.pushState() 或者 history.replaceState() 不会触发 popstate 事件<br />popstate 事件只关心历史记录的状态变化，不关心 URL 是否发生了变化</div></div></div></foreignObject><text x="649" y="260" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1" y="301" width="925" height="110" rx="44" ry="44" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 923px; height: 1px; padding-top: 356px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">重写 window.addEventListener 来缓存微应用的 hashchange 和 popstate 事件，并在 urlReroute 函数执行完毕后来触发这些缓存的 hashchange 和 popstate 事件<br />举个例子：微应用 A 注册了 popstate 事件，我们希望微应用失活后不会触发 popstate 事件，因此在微应用的 unmount 函数中清除了 popstate 事件监听器<br />如果没有任何处理，触发 popstate 事件后微应用 A 会立马监听 popstate 事件。为了实现该功能，single-spa 会通过重写 window.addEventListener 捕获微应用 A 的 popstate 监听事件，先通过 urlReroute 函数执行微应用的卸载（unmout），此时因为微应用 A 在 unmount 中清除了 popstate 事件，因此微应用 A 不会执行 popstate 事件<br />重写 window.addEventListener 并缓存微应用的  hashchange 和 popstate 事件是为了确保在合适的时机执行或者取消执行这些事件<br />single-spa 的理念就是在应用的卸载和挂载之间进行导航，因此这些导航事件应该在这两者之间执行，而不是由微应用自行控制执行时机</div></div></div></foreignObject><text x="464" y="360" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="961" y="371" width="380" height="60" rx="24" ry="24" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 378px; height: 1px; padding-top: 401px; margin-left: 962px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">SPA 应用中 React 或者 Vue 的路由本质上<br />底层都是调用 pushState 和 replaceState来改变 URL 而不刷新页面<br />通过重写这两个 API 可以监听路由的变化来激活和失活微应用 </div></div></div></foreignObject><text x="1151" y="405" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="11" y="161" width="915" height="50" rx="20" ry="20" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 913px; height: 1px; padding-top: 186px; margin-left: 12px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">hashchage 事件用于监听 hash 路由的变化（跟在＃符号后面的 URL 部分，包括＃符号）<br />例如：点击锚链接元素、修改 location.hash、浏览器历史导航（前进、后退）、修改导航栏地址、调用 location.replace、history.go、history.back 以及 history.forward 等</div></div></div></foreignObject><text x="469" y="190" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="216" y="131" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="216" y="671" width="10" height="70" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 236 691 L 571 691 Q 581 691 591 691 L 917.88 691" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 924.88 691 L 917.88 694.5 L 917.88 687.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 688px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">点击 Link 标签触发路由变化（底层调用 window.history.pushState）</div></div></div></foreignObject><text x="581" y="688" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 961 711 L 986 711 L 986 731 L 969.12 731" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 731 L 969.12 727.5 L 969.12 734.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 721px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">由于重写了 window.history.pushState<br />调用 patchedUpdateState 发送 popstate 事件 </div></div></div></foreignObject><text x="990" y="725" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 961 811 L 986 811 L 986 831 L 969.12 831" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 962.12 831 L 969.12 827.5 L 969.12 834.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 821px; margin-left: 990px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">触发执行 popstate 事件并执行 urlReroute 函数<br />注意这里会传入事件对象 event 作为参数  </div></div></div></foreignObject><text x="990" y="825" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="961" y="751" width="220" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 771px; margin-left: 962px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">由于应用已经调用 start 函数启动<br />因此这里会传入事件对象 event</div></div></div></foreignObject><text x="1071" y="775" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 961 871.33 L 961 871.16 Q 961 871 971 871 L 1641 871 Q 1651 871 1646.94 871.16 L 1642.88 871.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1649.88 871.33 L 1642.88 874.83 L 1642.88 867.83 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 868px; margin-left: 1306px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">urlReroute 函数执行的就是 reroute 函数，传入了 event 参数</div></div></div></foreignObject><text x="1306" y="868" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2016" y="871" width="10" height="108.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1681 989.5 L 1706 989.5 L 1706 1009.5 L 1689.12 1009.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1682.12 1009.5 L 1689.12 1006 L 1689.12 1013 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1000px; margin-left: 1710px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否已经调用 start 函数启动微应用</div></div></div></foreignObject><text x="1710" y="1003" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1681 889.5 L 1831 889.5 Q 1841 889.5 1851 889.5 L 1992.88 889.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1999.88 889.5 L 1992.88 893 L 1992.88 886 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 887px; margin-left: 1841px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">再次调用 getAppChanges 函数，判断所有微应用的变化情况</div></div></div></foreignObject><text x="1841" y="887" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1999.75 959.5 L 1681.99 959.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1689.87 955 L 1680.87 959.5 L 1689.87 964" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 957px; margin-left: 1840px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回所有需要变化的微应用信息</div></div></div></foreignObject><text x="1840" y="957" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2041 909.5 L 2066 909.5 L 2066 929.5 L 2049.12 929.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2042.12 929.5 L 2049.12 926 L 2049.12 933 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 920px; margin-left: 2070px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">执行同样的状态转换计算</div></div></div></foreignObject><text x="2070" y="923" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="1733.5" y="901" width="216.25" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 921px; margin-left: 1735px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">appsToLoad 放入了 React 微应用<br />appsToUnmount 放入了 Vue 微应用</div></div></div></foreignObject><text x="1842" y="925" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 1681 1029.5 L 1706 1029.5 L 1706 1049.5 L 1689.12 1049.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1682.12 1049.5 L 1689.12 1046 L 1689.12 1053 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1040px; margin-left: 1710px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">已经调用过 start 函数，设置正在变化的标志位，防止重复执行 performAppChanges </div></div></div></foreignObject><text x="1710" y="1043" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 1681 1081.39 L 1681 1081.2 Q 1681 1081 1691 1081 L 2392.88 1081" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2399.88 1081 L 2392.88 1084.5 L 2392.88 1077.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1078px; margin-left: 2041px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">已经执行过 start 函数时调用 performAppChanges 函数，根据需要变化微应用信息，执行微应用的变更流程</div></div></div></foreignObject><text x="2041" y="1078" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2439.75 1101 L 2464.7 1101 L 2464.7 1121 L 2447.87 1121" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 1121 L 2447.87 1117.5 L 2447.87 1124.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1111px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步执行应用批量变更逻辑<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="2469" y="1115" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="1031" width="220" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1056px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入微任务 1<br />等待异步执行 performAppChanges </div></div></div></foreignObject><text x="2550" y="1060" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2411" y="1201" width="10" height="840" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2439.75 1231 L 2464.8 1231 L 2464.8 1251 L 2447.87 1251" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 1251 L 2447.87 1247.5 L 2447.87 1254.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1241px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">计算需要变更的微应用信息<br />提供发送事件需要的数据详情（即将变更的应用新状态信息、变更的应用数等）</div></div></div></foreignObject><text x="2469" y="1245" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2439.75 1271 L 2464.8 1271 L 2464.8 1291 L 2447.87 1291" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 1291 L 2447.87 1287.5 L 2447.87 1294.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1281px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送 single-spa:before-app-change 事件<br />并提供事件对应的应用变化的详情信息</div></div></div></foreignObject><text x="2469" y="1285" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2439.75 1321 L 2464.8 1321 L 2464.8 1341 L 2447.87 1341" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 1341 L 2447.87 1337.5 L 2447.87 1344.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1331px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送 single-spa:before-routing-event 事件<br />并提供事件对应的应用变化的详情信息以及可以取消导航变化的钩子函数</div></div></div></foreignObject><text x="2469" y="1335" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2439.75 1471 L 2464.8 1471 L 2464.8 1491 L 2447.87 1491" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 1491 L 2447.87 1487.5 L 2447.87 1494.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1481px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果有应用需要 unload，则批量执行 toUnloadPromise</div></div></div></foreignObject><text x="2469" y="1485" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="1411" width="341.25" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 339px; height: 1px; padding-top: 1431px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">什么情况下会 unload 应用呢？这里没有需要 unload 的应用</div></div></div></foreignObject><text x="2610" y="1435" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="1511" width="301.25" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 299px; height: 1px; padding-top: 1531px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">由于 Vue 微应用失活，这里需要 unmount Vue 微应用</div></div></div></foreignObject><text x="2590" y="1535" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="1705" width="251.25" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 249px; height: 1px; padding-top: 1725px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">在 unmont 和 unload 的同时执行 load<br />load 的执行不会等待 unmount 完毕</div></div></div></foreignObject><text x="2565" y="1729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 1761 L 2891.63 1761 Q 2901.63 1761 2911.63 1761 L 3354.13 1761" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3361.13 1761 L 3354.13 1764.5 L 3354.13 1757.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1758px; margin-left: 2902px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">react 微应用需要 load，执行 toLoadPromise</div></div></div></foreignObject><text x="2902" y="1758" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="1851" width="220" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1871px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">没有需要 mount 的应用</div></div></div></foreignObject><text x="2551" y="1875" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2442.25 1906 L 2467.3 1906 L 2467.3 1926 L 2450.37 1926" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2443.37 1926 L 2450.37 1922.5 L 2450.37 1929.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1916px; margin-left: 2471px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果 app 已经 load 和 bootstrap<br />那么可能需要等待所有 unmount 结束后执行 mount</div></div></div></foreignObject><text x="2471" y="1920" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2439.75 1371 L 2464.8 1371 L 2464.8 1391 L 2447.87 1391" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 1391 L 2447.87 1387.5 L 2447.87 1394.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1381px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果外部主应用监听了 single-spa:before-routing-event 事件并调用了取消导航的钩子函数<br />single-spa 会触发相应的取消事件和后续的结束事件，并回退到旧的导航，后续逻辑放弃执行</div></div></div></foreignObject><text x="2469" y="1385" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2441 2006 L 2466 2006 L 2466 2026 L 2449.12 2026" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 2026 L 2449.12 2022.5 L 2449.12 2029.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2016px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 unmount 和 unload 执行结束 </div></div></div></foreignObject><text x="2470" y="2020" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="1161" width="220" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1186px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微任务 1 执行 <br />异步执行 performAppChanges </div></div></div></foreignObject><text x="2550" y="1190" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="1941" width="270" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 1966px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 4<br />再次等待所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2576" y="1970" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2171" y="1261" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1281px; margin-left: 2172px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:before-app-change </div></div></div></foreignObject><text x="2281" y="1285" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2171" y="1311" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1331px; margin-left: 2172px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:before-routing-event </div></div></div></foreignObject><text x="2281" y="1335" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2763.5" y="1" width="172.5" height="40" rx="16" ry="16" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 21px; margin-left: 2765px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">微应用卸载函数</div></div></div></foreignObject><text x="2850" y="25" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2439.75 1591 L 2624.75 1591 Q 2634.75 1591 2644.75 1591 L 2821.63 1591" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2828.63 1591 L 2821.63 1594.5 L 2821.63 1587.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1588px; margin-left: 2635px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Vue 微应用需要 unmount，执行 toUnmountPromise</div></div></div></foreignObject><text x="2635" y="1588" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2871 1631 L 2896 1631 L 2896 1651 L 2879.12 1651" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2872.12 1651 L 2879.12 1647.5 L 2879.12 1654.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1641px; margin-left: 2900px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步执行微应用卸载逻辑<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="2900" y="1645" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2871" y="1561" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1586px; margin-left: 2872px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】加入微任务 2<br />等待异步执行 toUnmountPromise </div></div></div></foreignObject><text x="2991" y="1590" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="1611" width="240" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1631px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 2<br />等待所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2561" y="1635" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 1671 L 2466 1671 L 2466 1691 L 2449.12 1691" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 1691 L 2449.12 1687.5 L 2449.12 1694.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1681px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 unmount 和 unload 执行结束 </div></div></div></foreignObject><text x="2470" y="1685" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 1791 L 3418.3 1791 L 3418.3 1811 L 3401.12 1811" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 1811 L 3401.12 1807.5 L 3401.12 1814.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1801px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步执行微应用加载逻辑<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="3422" y="1805" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3391" y="1725" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1750px; margin-left: 3392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】加入微任务 3<br />等待异步执行 toLoadPromise </div></div></div></foreignObject><text x="3511" y="1754" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2871" y="1951" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1976px; margin-left: 2872px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】微任务 2 执行<br />异步执行 toUnmountPromise </div></div></div></foreignObject><text x="2991" y="1980" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2871 2021 L 2896 2021 L 2896 2041 L 2879.12 2041" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2872.12 2041 L 2879.12 2037.5 L 2879.12 2044.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2031px; margin-left: 2900px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果 Vue 微应用的状态不是 MOUNTED<br />则不需要进行 unmount 处理 </div></div></div></foreignObject><text x="2900" y="2035" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2871 2111 L 2896 2111 L 2896 2131 L 2879.12 2131" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2872.12 2131 L 2879.12 2127.5 L 2879.12 2134.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2121px; margin-left: 2900px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 Vue 微应用的状态为 UNMOUNTING</div></div></div></foreignObject><text x="2900" y="2125" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2871" y="2051" width="320" height="50" rx="20" ry="20" fill="#ff9999" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 2076px; margin-left: 2872px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Vue 微应用的状态由 MOUNTED更改为 UNMOUNTING</div></div></div></foreignObject><text x="3031" y="2080" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2871" y="2151" width="270" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 2176px; margin-left: 2872px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 5<br />等待 unmountChildrenParcels 执行完毕 </div></div></div></foreignObject><text x="3006" y="2180" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3161" y="2151" width="220" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 2176px; margin-left: 3162px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">没有 children parcels<br />这里无需理解 parcels 概念</div></div></div></foreignObject><text x="3271" y="2180" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2871 2221 L 2896 2221 L 2896 2241 L 2879.12 2241" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2872.12 2241 L 2879.12 2237.5 L 2879.12 2244.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2231px; margin-left: 2900px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待 children parcels 卸载完毕 </div></div></div></foreignObject><text x="2900" y="2235" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3392 2241 L 3417 2241 L 3417 2261 L 3400.12 2261" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3393.12 2261 L 3400.12 2257.5 L 3400.12 2264.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2251px; margin-left: 3421px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">是否正在执行当前微应用的加载<br />如果正在执行，则直接返回对应的异步 Promise 对象</div></div></div></foreignObject><text x="3421" y="2255" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3392 2281 L 3417 2281 L 3417 2301 L 3400.12 2301" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3393.12 2301 L 3400.12 2297.5 L 3400.12 2304.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2291px; margin-left: 3421px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果微应用的状态不是 NOT_LOADED 和 LOAD_ERROR<br />则不进行加载处理 </div></div></div></foreignObject><text x="3421" y="2295" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3392 2371 L 3417 2371 L 3417 2391 L 3400.12 2391" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3393.12 2391 L 3400.12 2387.5 L 3400.12 2394.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2381px; margin-left: 3421px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">将应用的状态设置为 LOADING_SOURCE_CODE </div></div></div></foreignObject><text x="3421" y="2385" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3392 2411 L 3417 2411 L 3417 2431 L 3400.12 2431" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3393.12 2431 L 3400.12 2427.5 L 3400.12 2434.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2421px; margin-left: 3421px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">缓存异步加载微应用的 Promise 对象到 app 对象中<br />用于标记当前正在执行微应用的异步加载，可以过滤掉重复的加载</div></div></div></foreignObject><text x="3421" y="2425" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3391 2521 L 3416 2521 L 3416 2541 L 3399.12 2541" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3392.12 2541 L 3399.12 2537.5 L 3399.12 2544.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2531px; margin-left: 3420px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待异步执行微应用的加载<br />返回 Promise 执行状态</div></div></div></foreignObject><text x="3420" y="2535" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3391" y="2171" width="230" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2196px; margin-left: 3392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】微任务 3 执行<br />异步执行 toLoadPromise </div></div></div></foreignObject><text x="3506" y="2200" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3392" y="2451" width="190" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2476px; margin-left: 3393px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 6<br />等待异步执行微应用的加载 </div></div></div></foreignObject><text x="3487" y="2480" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3637.25" y="2171" width="170" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 2196px; margin-left: 3638px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">准备开始加载 React 微应用</div></div></div></foreignObject><text x="3722" y="2200" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3131" y="1951" width="170" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1976px; margin-left: 3132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">准备开始卸载 Vue 微应用</div></div></div></foreignObject><text x="3216" y="1980" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3391" y="2316" width="440" height="35" rx="14" ry="14" fill="#ff9999" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 2334px; margin-left: 3392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">React 微应用的状态由 NOT_LOADED 更改为 LOADING_SOURCE_CODE</div></div></div></foreignObject><text x="3611" y="2337" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2871" y="2501" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 2526px; margin-left: 2872px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 5 执行<br />unmountChildrenParcels 执行完毕 </div></div></div></foreignObject><text x="2991" y="2530" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2877.25 2571 L 2877.25 2571 Q 2877.25 2571 2887.25 2571 L 4312.88 2571" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4319.88 2571 L 4312.88 2574.5 L 4312.88 2567.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2568px; margin-left: 3599px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 reasonableTime 执行 unmount 函数</div></div></div></foreignObject><text x="3599" y="2568" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2881" y="2591" width="179" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 177px; height: 1px; padding-top: 2616px; margin-left: 2882px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 7<br />等待 reasonableTime 执行完毕</div></div></div></foreignObject><text x="2971" y="2620" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2881 2661 L 2906 2661 L 2906 2681 L 2889.12 2681" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2882.12 2681 L 2889.12 2677.5 L 2889.12 2684.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2671px; margin-left: 2910px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待异步的 reasonableTime 执行完毕</div></div></div></foreignObject><text x="2910" y="2675" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4361 2981 L 4386 2981 L 4386 3001 L 4369.12 3001" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 3001 L 4369.12 2997.5 L 4369.12 3004.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2991px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 unmount 函数运行的超时时间</div></div></div></foreignObject><text x="4390" y="2995" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4361 2711 L 4386 2711 L 4386 2731 L 4369.12 2731" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 2731 L 4369.12 2727.5 L 4369.12 2734.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2721px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">获取注册应用时提供的参数 4 customProps<br />执行微应用的 unmount 函数</div></div></div></foreignObject><text x="4390" y="2725" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4361 2941 L 4386 2941 L 4386 2961 L 4369.12 2961" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 2961 L 4369.12 2957.5 L 4369.12 2964.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2951px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待微应用的 unmount 的 Promise 回调执行</div></div></div></foreignObject><text x="4390" y="2955" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4361 2601 L 4386 2601 L 4386 2621 L 4369.12 2621" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 2621 L 4369.12 2617.5 L 4369.12 2624.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2611px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置执行结束的标志<br />设置错误标记</div></div></div></foreignObject><text x="4390" y="2615" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4635.25" y="2641" width="150" height="49" rx="19.6" ry="19.6" fill="#99ccff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 2666px; margin-left: 4636px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">使用参数 4 customProps</div></div></div></foreignObject><text x="4710" y="2669" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4361" y="2641" width="260" height="49" rx="19.6" ry="19.6" fill="#ff99ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 2666px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">真正开始执行 Vue 微应用的 unmount 函数</div></div></div></foreignObject><text x="4491" y="2669" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4361" y="2871" width="200" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 2896px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 8<br />等待微应用的  unmount 执行完毕</div></div></div></foreignObject><text x="4461" y="2900" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4361" y="2531" width="330" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 328px; height: 1px; padding-top: 2556px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">所有生命周期函数的执行都会判定执行的超时时间</div></div></div></foreignObject><text x="4526" y="2560" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 609.12 2761 L 605.06 2761 Q 601 2761 611 2761 L 4311 2761 Q 4321 2761 4321 2761 L 4321 2761" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 2761 L 609.12 2757.5 L 609.12 2764.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2758px; margin-left: 2461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">异步执行 unmount 函数，传入 customProps 数据</div></div></div></foreignObject><text x="2461" y="2758" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="576" y="2741" width="10" height="110" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 601 2791 L 626 2791 L 626 2811 L 609.12 2811" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 2811 L 609.12 2807.5 L 609.12 2814.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2801px; margin-left: 630px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">接收 customProps 参数<br />执行 unmount 函数</div></div></div></foreignObject><text x="630" y="2805" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4318.76 2841 L 601 2841" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 4312.88 2844.5 L 4319.88 2841 L 4312.88 2837.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2838px; margin-left: 2461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回 Promise</div></div></div></foreignObject><text x="2461" y="2838" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3392 3040 L 3417 3040 L 3417 3060 L 3400.12 3060" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3393.12 3060 L 3400.12 3056.5 L 3400.12 3063.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3050px; margin-left: 3421px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">调用 getProps 获取注册时提供的参数 4 customProps 的数据<br />包括 customProps 格式校验以及额外需要传递的信息处理</div></div></div></foreignObject><text x="3421" y="3054" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3582" y="2970" width="150" height="49" rx="19.6" ry="19.6" fill="#99ccff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 2995px; margin-left: 3583px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">使用参数 4 customProps</div></div></div></foreignObject><text x="3657" y="2998" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3392" y="2970" width="170" height="49" rx="19.6" ry="19.6" fill="#ff99ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 2995px; margin-left: 3393px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">真正开始加载 React 微应用</div></div></div></foreignObject><text x="3477" y="2998" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3392" y="2911" width="190" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2936px; margin-left: 3393px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 6 执行<br />异步执行微应用的加载 </div></div></div></foreignObject><text x="3487" y="2940" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 249.12 3101 L 1781 3101 Q 1791 3101 1801 3101 L 3341 3101" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 242.12 3101 L 249.12 3097.5 L 249.12 3104.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3098px; margin-left: 1791px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用在 sanitizeArguments 中已经格式化成返回 Promise 的函数的参数 2 loadApp，传递 customProps 数据，执行微应用的加载逻辑 </div></div></div></foreignObject><text x="1791" y="3098" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 241 3131 L 266 3131 L 266 3151 L 249.12 3151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 242.12 3151 L 249.12 3147.5 L 249.12 3154.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3141px; margin-left: 270px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">在主应用中执行 fetchApp 方法，注意这里需要返回 Promise</div></div></div></foreignObject><text x="270" y="3145" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 241 3171 L 266 3171 L 266 3191 L 249.12 3191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 242.12 3191 L 249.12 3187.5 L 249.12 3194.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3181px; margin-left: 270px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">通过 window.fetch 遍历获取代码分割后的脚本</div></div></div></foreignObject><text x="270" y="3185" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 241 3351 L 266 3351 L 266 3371 L 249.12 3371" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 242.12 3371 L 249.12 3367.5 L 249.12 3374.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3361px; margin-left: 270px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">按顺序遍历 window 属性<br />立即获取最后一个属性，即为导出的微应用生命周期函数对象</div></div></div></foreignObject><text x="270" y="3365" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="216" y="3071" width="10" height="370" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="576" y="3201" width="10" height="140" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 241 3211 L 391 3211 Q 401 3211 411 3211 L 552.88 3211" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 559.88 3211 L 552.88 3214.5 L 552.88 3207.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3208px; margin-left: 401px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">通过 eval 按顺序执行微应用的脚本</div></div></div></foreignObject><text x="401" y="3208" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 601 3221 L 626 3221 L 626 3241 L 609.12 3241" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 3241 L 609.12 3237.5 L 609.12 3244.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3231px; margin-left: 630px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">初始化生命周期函数 bootstrap、mount 和 unmount 等</div></div></div></foreignObject><text x="630" y="3235" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 601 3301 L 626 3301 L 626 3321 L 609.12 3321" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 3321 L 609.12 3317.5 L 609.12 3324.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3311px; margin-left: 630px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">构建后的运行时代码通过 UMD 导出，<br />代码最后会将初始化生命周期函数挂载到 window 对象的属性上</div></div></div></foreignObject><text x="630" y="3315" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 561 3330.17 L 243.24 3330.17" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 251.12 3325.67 L 242.12 3330.17 L 251.12 3334.67" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3327px; margin-left: 401px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回</div></div></div></foreignObject><text x="401" y="3327" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="601" y="3251" width="390" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 388px; height: 1px; padding-top: 3271px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">此时 window 对象上按顺序遍历的最后一个属性用于挂载生命周期函数</div></div></div></foreignObject><text x="796" y="3275" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="601" y="3341" width="460" height="60" rx="24" ry="24" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 458px; height: 1px; padding-top: 3371px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">这里执行微应用代码和获取 window 属性必须是同步执行<br />如果是异步执行，则无法保证最新添加的 window 属性映射的是微应用生命周期函数<br />因为无法确保其他异步任务执行了 window 对象上属性的赋值操作</div></div></div></foreignObject><text x="831" y="3375" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3348.76 3418 L 241 3418.14" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 3342.88 3421.5 L 3349.88 3418 L 3342.88 3414.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3415px; margin-left: 1796px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回包含微应用生命周期函数对象的 Promise</div></div></div></foreignObject><text x="1796" y="3415" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="1602" y="3291" width="400" height="100" rx="40" ry="40" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 3341px; margin-left: 1603px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">single-spa 将应用的加载逻辑交由开发者自行决定<br /><br />不管采用什么方式加载微应用<br />例如 window.fetch、动态 Script、Ajax 请求、NPM 包模块化加载<br />参数 2 loadApp 本质上是返回微应用生命周期函数的 Promise 对象</div></div></div></foreignObject><text x="1802" y="3345" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3393 3441.14 L 3418 3441.1 L 3418 3461.1 L 3401.12 3461.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 3461.14 L 3401.11 3457.63 L 3401.12 3464.63 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3451px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">判断是否返回了 Promise 对象<br />如果不是，则抛出异常</div></div></div></foreignObject><text x="3422" y="3455" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3392" y="3481.14" width="220" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 3506px; margin-left: 3393px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 9<br />等待参数 2 loadApp 执行完毕</div></div></div></foreignObject><text x="3502" y="3510" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3393 3551.14 L 3418 3551.1 L 3418 3571.1 L 3401.12 3571.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 3571.14 L 3401.11 3567.63 L 3401.12 3574.63 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3561px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果 loadApp 执行后返回的是 Promise 对象<br />等待 Promise 的回调执行</div></div></div></foreignObject><text x="3422" y="3565" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4361" y="3531.14" width="200" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 3556px; margin-left: 4362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 8 执行<br />微应用的  unmount 执行完毕</div></div></div></foreignObject><text x="4461" y="3560" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4361 3601 L 4386 3601 L 4386 3621 L 4369.12 3621" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4362.12 3621 L 4369.12 3617.5 L 4369.12 3624.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3611px; margin-left: 4390px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 unmount 执行结束标记<br />防止执行超时逻辑</div></div></div></foreignObject><text x="4390" y="3615" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4322 3651 L 2883.24 3651" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2891.12 3648 L 2882.12 3651 L 2891.12 3654" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3648px; margin-left: 3602px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">完成 unmount 执行</div></div></div></foreignObject><text x="3602" y="3648" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2881 3741 L 2906 3741 L 2906 3761 L 2889.12 3761" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2882.12 3761 L 2889.12 3757.5 L 2889.12 3764.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3751px; margin-left: 2910px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置应用的状态为 NOT_MOUNTED  </div></div></div></foreignObject><text x="2910" y="3755" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2881" y="3671" width="179" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 177px; height: 1px; padding-top: 3696px; margin-left: 2882px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 7 执行<br />reasonableTime 执行完毕</div></div></div></foreignObject><text x="2971" y="3700" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3081" y="3671" width="250" height="50" rx="20" ry="20" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 3696px; margin-left: 3082px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">更改 Vue 微应用状态为 NOT_MOUNTED </div></div></div></foreignObject><text x="3206" y="3700" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2761" y="1511" width="240" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1531px; margin-left: 2762px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 1<br />等待 Vue 微应用的 unmount 执行完毕 </div></div></div></foreignObject><text x="2881" y="1535" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2831 3811 L 2443.24 3811" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2451.12 3808 L 2442.12 3811 L 2451.12 3814" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3808px; margin-left: 2636px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">完成 Vue 微应用的 unmount 执行</div></div></div></foreignObject><text x="2636" y="3808" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="3831" width="240" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 3851px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 1 执行<br />Vue 微应用的 unmount 执行完毕 </div></div></div></foreignObject><text x="2560" y="3855" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 3891 L 2466 3891 L 2466 3911 L 2449.12 3911" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 3911 L 2449.12 3907.5 L 2449.12 3914.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3901px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">由于没有 unload 需要执行<br />这里省略了 toUnloadPromise 的执行逻辑</div></div></div></foreignObject><text x="2470" y="3905" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="3941" width="240" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 3961px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 2 执行<br />所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2560" y="3965" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2442.25 4006 L 2467.3 4006 L 2467.3 4026 L 2450.37 4026" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2443.37 4026 L 2450.37 4022.5 L 2450.37 4029.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4016px; margin-left: 2471px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有 unmount 和 unload 执行完毕后<br />发送 single-spa:before-mount-routing-event 事件</div></div></div></foreignObject><text x="2471" y="4020" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2181" y="3996" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 4016px; margin-left: 2182px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:before-mount-routing-event </div></div></div></foreignObject><text x="2291" y="4020" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="4051" width="270" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 4076px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 4 执行<br />再次所有的 unmount 和 unload 执行完毕 </div></div></div></foreignObject><text x="2576" y="4080" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2439.75 4121 L 2464.8 4121 L 2464.8 4141 L 2447.87 4141" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 4141 L 2447.87 4137.5 L 2447.87 4144.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4131px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有的 unmount 和 unload 执行完毕<br />回调主要执行 callAllEventListeners 处理路由事件<br />执行所有缓存的 popstate 和 hashchange 事件</div></div></div></foreignObject><text x="2469" y="4135" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2719.75" y="4051" width="761.25" height="50" rx="20" ry="20" fill="#ffffc0" stroke="#ffffff" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 759px; height: 1px; padding-top: 4076px; margin-left: 2721px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">如果微应用在 unmount 周期函数里执行了 window.removeEventListener 注销事件监听<br />single-spa 因为重写了  removeEventListener 会去除缓存事件，从而停止微应用的事件监听<br />single-spa 的理念就是在应用的卸载和挂载之间进行导航，因此这些导航事件应该在这两者之间执行，而不是由微应用自行控制执行时机</div></div></div></foreignObject><text x="3100" y="4080" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2439.75 4181 L 3550.38 4181 Q 3560.38 4181 3570.38 4181 L 4672.88 4181" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4679.88 4181 L 4672.88 4184.5 L 4672.88 4177.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4178px; margin-left: 3560px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">等待所有的 load 和 mount 执行完毕</div></div></div></foreignObject><text x="3560" y="4178" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4721 4201 L 4746 4201 L 4746 4221 L 4729.12 4221" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4722.12 4221 L 4729.12 4217.5 L 4729.12 4224.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4211px; margin-left: 4750px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待所有的 load 和 mount 执行完毕<br />准备执行结束逻辑</div></div></div></foreignObject><text x="4750" y="4215" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4721" y="4131" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4156px; margin-left: 4722px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 10<br />等待所有的 load 和 mount 执行完毕 </div></div></div></foreignObject><text x="4841" y="4160" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3392" y="4261" width="220" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 4286px; margin-left: 3393px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "> Promise 回调 9 执行<br />参数 2 loadApp 执行完毕</div></div></div></foreignObject><text x="3502" y="4290" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3393 4411 L 3418 4411 L 3418 4431 L 3401.12 4431" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4431 L 3401.12 4427.5 L 3401.12 4434.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4421px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对返回值的所有生命周期函数进行格式化校验<br />例如判断 bootstrap 是否存在，是否是函数，是否是函数数组等</div></div></div></foreignObject><text x="3422" y="4425" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 4501 L 3418 4501 L 3418 4521 L 3401.12 4521" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4521 L 3401.12 4517.5 L 3401.12 4524.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4511px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">将应用的状态设置为 NOT_BOOTSTRAPPED </div></div></div></foreignObject><text x="3422" y="4515" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 4601 L 3418 4601 L 3418 4621 L 3401.12 4621" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4621 L 3401.12 4617.5 L 3401.12 4624.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4611px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">对所有生命周期函数进行数组平铺处理<br />例如 bootstrap: [ async () =&gt; {}, async () =&gt; {}] 平铺成按顺序链式执行 Promise</div></div></div></foreignObject><text x="3422" y="4615" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3393" y="4541" width="330" height="40" rx="16" ry="16" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 328px; height: 1px; padding-top: 4561px; margin-left: 3394px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">在 qiankun 中所有的生命周期函数都是 async 数组</div></div></div></foreignObject><text x="3558" y="4565" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3393 4641 L 3418 4641 L 3418 4661 L 3401.12 4661" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4661 L 3401.12 4657.5 L 3401.12 4664.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4651px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">将平铺后的生命周期函数缓存到对应的微应用 app 对象中<br />后续会在特定的时机执行这些生命周期函数</div></div></div></foreignObject><text x="3422" y="4655" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 4331 L 3418 4331 L 3418 4351 L 3401.12 4351" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4351 L 3401.12 4347.5 L 3401.12 4354.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4341px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重置 app 的加载错误时间<br />有回调说明 app 加载成功</div></div></div></foreignObject><text x="3422" y="4345" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 4371 L 3418 4371 L 3418 4391 L 3401.12 4391" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4391 L 3401.12 4387.5 L 3401.12 4394.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4381px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">由于需要返回生命周期函数对象 { bootstrap，mount，unmount }<br />因此需要判断 Promise 回调的值是否是对象</div></div></div></foreignObject><text x="3422" y="4385" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 4681 L 3418 4681 L 3418 4701 L 3401.12 4701" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4701 L 3401.12 4697.5 L 3401.12 4704.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4691px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">删除当前异步加载的 Promise 对象，解除重复加载的限制<br />如果之后执行了 unload，激活应用后还能继续执行 loadApp 加载</div></div></div></foreignObject><text x="3422" y="4695" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 3393 4721 L 3418 4721 L 3418 4741 L 3401.12 4741" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3394.12 4741 L 3401.12 4737.5 L 3401.12 4744.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4731px; margin-left: 3422px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回赋值了生命周期函数的 app 对象</div></div></div></foreignObject><text x="3422" y="4735" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="3636" y="4261" width="170" height="49" rx="19.6" ry="19.6" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 4286px; margin-left: 3637px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">解析 React 微应用执行后的<br />微应用生命周期函数</div></div></div></foreignObject><text x="3721" y="4289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3392" y="4451" width="299" height="40" rx="16" ry="16" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 297px; height: 1px; padding-top: 4471px; margin-left: 3393px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">更改 React 微应用状态为 NOT_BOOTSTRAPPED </div></div></div></foreignObject><text x="3542" y="4475" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3351 4771 L 2443.24 4771" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2451.12 4768 L 2442.12 4771 L 2451.12 4774" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4768px; margin-left: 2896px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">完成 toLoadPromise 执行</div></div></div></foreignObject><text x="2896" y="4768" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="1771" width="220" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1791px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 3<br />等待 toLoadPromise 执行完毕</div></div></div></foreignObject><text x="2550" y="1795" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 1821 L 2466 1821 L 2466 1841 L 2449.12 1841" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 1841 L 2449.12 1837.5 L 2449.12 1844.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1831px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待 React 微应用的 toLoadPromise 执行完毕 </div></div></div></foreignObject><text x="2470" y="1835" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="4791" width="220" height="40" rx="16" ry="16" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 4811px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 3 执行<br />toLoadPromise 执行完毕</div></div></div></foreignObject><text x="2550" y="4815" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2439.75 4851 L 2464.8 4851 L 2464.8 4871 L 2447.87 4871" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 4871 L 2447.87 4867.5 L 2447.87 4874.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4861px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">React 微应用的 loadApp 执行完毕<br />准备执行 bootstrap 和 mount</div></div></div></foreignObject><text x="2469" y="4865" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2439.75 4901 L 2464.8 4901 L 2464.8 4921 L 2447.87 4921" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.87 4921 L 2447.87 4917.5 L 2447.87 4924.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 4911px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">再次判断当前需要 bootstrap 和 mount 的 React 微应用<br />是否被激活</div></div></div></foreignObject><text x="2469" y="4915" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 2441 4951.33 L 2441 4951.17 Q 2441 4951 2451 4951 L 3702.88 4951" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3709.88 4951 L 3702.88 4954.5 L 3702.88 4947.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4948px; margin-left: 3076px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">React 微应用被激活，准备执行 toBootstrapPromise</div></div></div></foreignObject><text x="3076" y="4948" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3741 5241.12 L 3741 5241.06 Q 3741 5241 3751 5241 L 4311 5241 Q 4321 5241 4316.94 5241.06 L 4312.88 5241.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4319.88 5241.12 L 4312.88 5244.62 L 4312.88 5237.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5238px; margin-left: 4031px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 reasonableTime 执行 bootstrap 函数</div></div></div></foreignObject><text x="4031" y="5238" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 609.12 5451 L 2451 5451 Q 2461 5451 2471 5451 L 4321 5451" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 5451 L 609.12 5447.5 L 609.12 5454.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5448px; margin-left: 2461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">异步执行 bootstrap 函数，传入 customProps 数据</div></div></div></foreignObject><text x="2461" y="5448" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4318.76 5521 L 601 5521" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 4312.88 5524.5 L 4319.88 5521 L 4312.88 5517.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5518px; margin-left: 2461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回 Promise</div></div></div></foreignObject><text x="2461" y="5518" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="576" y="5431" width="10" height="110" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 601 5481 L 626 5481 L 626 5501 L 609.12 5501" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 5501 L 609.12 5497.5 L 609.12 5504.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5491px; margin-left: 630px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">接收 customProps 参数<br />执行 bootsrap 函数</div></div></div></foreignObject><text x="630" y="5495" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4694" y="5681" width="10" height="160" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 4721 5701 L 4746 5701 L 4746 5721 L 4729.12 5721" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4722.12 5721 L 4729.12 5717.5 L 4729.12 5724.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5711px; margin-left: 4750px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">所有的 load 和 mount（注意首次激活 mount 为空） 执行完毕<br />发送 single-spa:app-change 事件</div></div></div></foreignObject><text x="4750" y="5715" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4721 5751 L 4746 5751 L 4746 5771 L 4729.12 5771" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4722.12 5771 L 4729.12 5767.5 L 4729.12 5774.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5761px; margin-left: 4750px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送 single-spa:routing-event 事件</div></div></div></foreignObject><text x="4750" y="5765" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4721 5801 L 4746 5801 L 4746 5821 L 4729.12 5821" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4722.12 5821 L 4729.12 5817.5 L 4729.12 5824.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5811px; margin-left: 4750px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">重置应用正在变化的标记<br />从而可以继续执行 performAppChanges </div></div></div></foreignObject><text x="4750" y="5815" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4721" y="5621" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 5646px; margin-left: 4722px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 10 执行<br />所有的 load 和 mount 执行完毕 </div></div></div></foreignObject><text x="4841" y="5650" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4461" y="5691" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 5711px; margin-left: 4462px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:app-change </div></div></div></foreignObject><text x="4571" y="5715" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4461" y="5741" width="220" height="40" rx="16" ry="16" fill="#97d077" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 5761px; margin-left: 4462px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">发送事件<br />single-spa:routing-event </div></div></div></foreignObject><text x="4571" y="5765" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4321 5911 L 3743.24 5911" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 3751.12 5908 L 3742.12 5911 L 3751.12 5914" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5908px; margin-left: 4031px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">完成 bootstrap 执行</div></div></div></foreignObject><text x="4031" y="5908" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3941" y="5931" width="270" height="50" rx="20" ry="20" fill="#ff9999" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 5956px; margin-left: 3942px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">更改 React 微应用状态为 NOT_MOUNTED </div></div></div></foreignObject><text x="4076" y="5960" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 3701 6041 L 2443.24 6041" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2451.12 6038 L 2442.12 6041 L 2451.12 6044" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6038px; margin-left: 3071px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">完成 toBootstrapPromise 执行</div></div></div></foreignObject><text x="3071" y="6038" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2441" y="6061" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 6086px; margin-left: 2442px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 13 执行<br />toBootstrapPromise 执行完毕</div></div></div></foreignObject><text x="2561" y="6090" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2697.25" y="6061" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 6086px; margin-left: 2698px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 14<br />等待所有的 unmount 执行完毕</div></div></div></foreignObject><text x="2817" y="6090" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2441 5041 L 2466 5041 L 2466 5061 L 2449.12 5061" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2442.12 5061 L 2449.12 5057.5 L 2449.12 5064.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 5051px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待应用的 toBootstrapPromise 执行完毕</div></div></div></foreignObject><text x="2470" y="5055" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="2439.75" y="4971" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 4996px; margin-left: 2441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 13<br />等待 toBootstrapPromise 执行完毕</div></div></div></foreignObject><text x="2560" y="5000" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 2439.75 6181 L 3190.38 6181 Q 3200.38 6181 3210.38 6181 L 3952.88 6181" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3959.88 6181 L 3952.88 6184.5 L 3952.88 6177.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6178px; margin-left: 3200px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">应用被激活，其它微应用 unmount 完成，则准备执行 toMountPromise</div></div></div></foreignObject><text x="3200" y="6178" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="2956" y="6101" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 6126px; margin-left: 2957px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 14 执行<br />所有的 unmount 执行完毕</div></div></div></foreignObject><text x="3076" y="6130" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="3221" y="6101" width="180" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 6126px; margin-left: 3222px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">mount 的执行会等待所有的 unmount 执行完毕 </div></div></div></foreignObject><text x="3311" y="6130" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4006 6211 L 4031 6211 L 4031 6231 L 4014.12 6231" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4007.12 6231 L 4014.12 6227.5 L 4014.12 6234.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6221px; margin-left: 4035px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">开启微任务，异步执行微应用挂载逻辑<br />等待主应用同步任务执行完毕后再执行，避免阻塞主线程</div></div></div></foreignObject><text x="4035" y="6225" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4001 6321 L 4026 6321 L 4026 6341 L 4009.12 6341" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4002.12 6341 L 4009.12 6337.5 L 4009.12 6344.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6331px; margin-left: 4030px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果应用状态不是 NOT_MOUNTE<br />则不执行加载逻辑</div></div></div></foreignObject><text x="4030" y="6335" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4001 6361 L 4026 6361 L 4026 6381 L 4009.12 6381" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4002.12 6381 L 4009.12 6377.5 L 4009.12 6384.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6371px; margin-left: 4030px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">如果是第一次即将执行 mount<br />则发送事件 single-spa:before-first-mount</div></div></div></foreignObject><text x="4030" y="6375" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4001 6411.33 L 4001 6411.16 Q 4001 6411 4011 6411 L 4312.88 6411" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4319.88 6411 L 4312.88 6414.5 L 4312.88 6407.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6408px; margin-left: 4161px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">调用 reasonableTime 执行 mount 函数</div></div></div></foreignObject><text x="4161" y="6408" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4001" y="6141" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 6166px; margin-left: 4002px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】加入微任务 5<br />等待异步执行 toMountPromise </div></div></div></foreignObject><text x="4121" y="6170" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4001" y="6251" width="240" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 6276px; margin-left: 4002px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">【performAppChanges】微任务 5 执行<br />异步执行 toMountPromise </div></div></div></foreignObject><text x="4121" y="6280" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4001" y="6421" width="179" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 177px; height: 1px; padding-top: 6446px; margin-left: 4002px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 15<br />等待 reasonableTime 执行完毕</div></div></div></foreignObject><text x="4091" y="6450" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4001 6491 L 4026 6491 L 4026 6511 L 4009.12 6511" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4002.12 6511 L 4009.12 6507.5 L 4009.12 6514.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6501px; margin-left: 4030px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待异步的 reasonableTime 执行完毕</div></div></div></foreignObject><text x="4030" y="6505" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4271" y="6341" width="180" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 6366px; margin-left: 4272px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">非第一次执行 mount<br />首次激活的是 Vue 微应用</div></div></div></foreignObject><text x="4361" y="6370" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4358.87 6821 L 4383.9 6821 L 4383.9 6841 L 4366.99 6841" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4359.99 6841 L 4366.99 6837.5 L 4366.99 6844.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6831px; margin-left: 4388px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 mount 执行结束标记<br />防止执行超时逻辑</div></div></div></foreignObject><text x="4388" y="6835" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4358.87 6461 L 4383.9 6461 L 4383.9 6481 L 4366.99 6481" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4359.99 6481 L 4366.99 6477.5 L 4366.99 6484.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6471px; margin-left: 4388px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置执行结束的标志<br />设置错误标记</div></div></div></foreignObject><text x="4388" y="6475" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4633.12" y="6501" width="150" height="49" rx="19.6" ry="19.6" fill="#99ccff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 6526px; margin-left: 4634px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">使用参数 4 customProps</div></div></div></foreignObject><text x="4708" y="6529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4358.87" y="6501" width="260" height="49" rx="19.6" ry="19.6" fill="#ff99ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 6526px; margin-left: 4360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">真正开始执行 React  微应用的 mount 函数</div></div></div></foreignObject><text x="4489" y="6529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4358.87 6560 L 4383.9 6560 L 4383.9 6580 L 4366.99 6580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4359.99 6580 L 4366.99 6576.5 L 4366.99 6583.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6570px; margin-left: 4388px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">获取注册应用时提供的参数 4 customProps<br />执行微应用的 mount 函数</div></div></div></foreignObject><text x="4388" y="6574" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4358.87 6711 L 4383.9 6711 L 4383.9 6731 L 4366.99 6731" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4359.99 6731 L 4366.99 6727.5 L 4366.99 6734.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6721px; margin-left: 4388px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">设置 mount 函数运行的超时时间</div></div></div></foreignObject><text x="4388" y="6725" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><path d="M 4358.87 6671 L 4383.9 6671 L 4383.9 6691 L 4366.99 6691" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 4359.99 6691 L 4366.99 6687.5 L 4366.99 6694.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6681px; margin-left: 4388px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">等待微应用 mount 的 Promise 回调执行</div></div></div></foreignObject><text x="4388" y="6685" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4358.87" y="6601" width="200" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 6626px; margin-left: 4360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">加入 Promise 回调 16<br />等待微应用的  mount 执行完毕</div></div></div></foreignObject><text x="4459" y="6630" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4358.87" y="6751" width="200" height="50" rx="20" ry="20" fill="#9999ff" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 6776px; margin-left: 4360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Promise 回调 16 执行<br />微应用的 mount 执行完毕</div></div></div></foreignObject><text x="4459" y="6780" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4358.87" y="6401" width="330" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 328px; height: 1px; padding-top: 6426px; margin-left: 4360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">所有生命周期函数的执行都会判定执行的超时时间</div></div></div></foreignObject><text x="4524" y="6430" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="4336" y="6431" width="10" height="450" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 609.12 6601 L 2451 6601 Q 2461 6601 2471 6601 L 4321 6601" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 6601 L 609.12 6597.5 L 609.12 6604.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6598px; margin-left: 2461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">异步执行 mount 函数，传入 customProps 数据</div></div></div></foreignObject><text x="2461" y="6598" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><path d="M 4318.76 6659.76 L 601 6659.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 4312.88 6663.26 L 4319.88 6659.76 L 4312.88 6656.26" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6657px; margin-left: 2461px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">返回 Promise</div></div></div></foreignObject><text x="2461" y="6657" fill="#000000" font-family="Garamond" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g><rect x="576" y="6581" width="10" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 601 6621 L 626 6621 L 626 6641 L 609.12 6641" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 602.12 6641 L 609.12 6637.5 L 609.12 6644.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 6631px; margin-left: 630px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Garamond; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">接收 customProps 参数<br />执行 mount 函数</div></div></div></foreignObject><text x="630" y="6635" fill="#000000" font-family="Garamond" font-size="12px">[Not supported by viewer]</text></switch></g><rect x="4241" y="6985" width="200" height="50" rx="20" ry="20" fill="#ffffc0" stroke="none" pointer-events="none"/><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 7010px; margin-left: 4242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">非第一次执行 mount<br />首次执行 mount 的是 Vue 微应用</div></div></div></foreignObject><text x="4341" y="7014" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[Not supported by viewer]</text></switch></g></g></svg>